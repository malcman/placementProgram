!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rematrix"),require("prop-types"),require("react")):"function"==typeof define&&define.amd?define(["exports","rematrix","prop-types","react"],e):e(t.ReactFlipToolkit={},t.Rematrix,t.PropTypes,t.React)}(this,function(t,e,n,i){n=n&&n.hasOwnProperty("default")?n.default:n;var r="default"in i?i.default:i,o=function(t){return"number"==typeof t},a=function(t){return"[object Object]"===Object.prototype.toString.call(t)},s=function(t){return Array.prototype.slice.apply(t)};function l(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return e.forEach(function(e){if(e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}),t}var p,c={noWobble:{stiffness:200,damping:26},gentle:{stiffness:120,damping:14},veryGentle:{stiffness:130,damping:17},wobbly:{stiffness:180,damping:12},stiff:{stiffness:260,damping:26}},u=function(t,e,n){var i=t(e).map(function(t){return t.dataset.flipId});return n.filter(function(t){return i.indexOf(t)>-1})},f="[data-flip-id]:not([data-is-appearing])";"undefined"!=typeof window&&(p=window.requestAnimationFrame);var d=p=p||function(t){window.setTimeout(t,1e3/60)},h=Date.now(),g="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()-h};function m(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}var v=function(){};v.prototype.run=function(){var t=this;d(function(){t.springSystem.loop(g())})};var y=function(){this.position=0,this.velocity=0},S=function t(e){this._id="s"+t._ID++,this._springSystem=e,this.listeners=[],this._startValue=0,this._currentState=new y,this._displacementFromRestThreshold=.001,this._endValue=0,this._overshootClampingEnabled=!1,this._previousState=new y,this._restSpeedThreshold=.001,this._tempState=new y,this._timeAccumulator=0,this._wasAtRest=!0};S.prototype.getId=function(){return this._id},S.prototype.destroy=function(){this.listeners=[],this._springSystem.deregisterSpring(this)},S.prototype.setSpringConfig=function(t){return this._springConfig=t,this},S.prototype.getCurrentValue=function(){return this._currentState.position},S.prototype.getDisplacementDistanceForState=function(t){return Math.abs(this._endValue-t.position)},S.prototype.setEndValue=function(t){if(this._endValue===t&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=t,this._springSystem.activateSpring(this.getId());for(var e=0,n=this.listeners.length;e<n;e++){var i=this.listeners[e].onSpringEndStateChange;i&&i(this)}return this},S.prototype.setVelocity=function(t){return t===this._currentState.velocity?this:(this._currentState.velocity=t,this._springSystem.activateSpring(this.getId()),this)},S.prototype.setOvershootClampingEnabled=function(t){return this._overshootClampingEnabled=t,this},S.prototype.isOvershooting=function(){var t=this._startValue,e=this._endValue;return this._springConfig.tension>0&&(t<e&&this.getCurrentValue()>e||t>e&&this.getCurrentValue()<e)},S.prototype.advance=function(t,e){var n=this.isAtRest();if(!n||!this._wasAtRest){var i=e;e>S.MAX_DELTA_TIME_SEC&&(i=S.MAX_DELTA_TIME_SEC),this._timeAccumulator+=i;for(var r,o,a,s,l,p,c=this._springConfig.tension,u=this._springConfig.friction,f=this._currentState.position,d=this._currentState.velocity,h=this._tempState.position,g=this._tempState.velocity;this._timeAccumulator>=S.SOLVER_TIMESTEP_SEC;)this._timeAccumulator-=S.SOLVER_TIMESTEP_SEC,this._timeAccumulator<S.SOLVER_TIMESTEP_SEC&&(this._previousState.position=f,this._previousState.velocity=d),o=c*(this._endValue-h)-u*d,s=c*(this._endValue-(h=f+(r=d)*S.SOLVER_TIMESTEP_SEC*.5))-u*(g=d+o*S.SOLVER_TIMESTEP_SEC*.5),p=c*(this._endValue-(h=f+(a=g)*S.SOLVER_TIMESTEP_SEC*.5))-u*(g=d+s*S.SOLVER_TIMESTEP_SEC*.5),h=f+(l=g)*S.SOLVER_TIMESTEP_SEC,f+=1/6*(r+2*(a+l)+(g=d+p*S.SOLVER_TIMESTEP_SEC))*S.SOLVER_TIMESTEP_SEC,d+=1/6*(o+2*(s+p)+(c*(this._endValue-h)-u*g))*S.SOLVER_TIMESTEP_SEC;this._tempState.position=h,this._tempState.velocity=g,this._currentState.position=f,this._currentState.velocity=d,this._timeAccumulator>0&&this._interpolate(this._timeAccumulator/S.SOLVER_TIMESTEP_SEC),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(this._springConfig.tension>0?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),n=!0);var m=!1;this._wasAtRest&&(this._wasAtRest=!1,m=!0);var v=!1;n&&(this._wasAtRest=!0,v=!0),this.notifyPositionUpdated(m,v)}},S.prototype.notifyPositionUpdated=function(t,e){for(var n=0,i=this.listeners.length;n<i;n++){var r=this.listeners[n];t&&r.onSpringActivate&&r.onSpringActivate(this),r.onSpringUpdate&&r.onSpringUpdate(this),e&&r.onSpringAtRest&&r.onSpringAtRest(this)}},S.prototype.systemShouldAdvance=function(){return!this.isAtRest()||!this.wasAtRest()},S.prototype.wasAtRest=function(){return this._wasAtRest},S.prototype.isAtRest=function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},S.prototype._interpolate=function(t){this._currentState.position=this._currentState.position*t+this._previousState.position*(1-t),this._currentState.velocity=this._currentState.velocity*t+this._previousState.velocity*(1-t)},S.prototype.addListener=function(t){return this.listeners.push(t),this},S.prototype.removeListener=function(t){return m(this.listeners,t),this},S._ID=0,S.MAX_DELTA_TIME_SEC=.064,S.SOLVER_TIMESTEP_SEC=.001;var E=function(t){this.looper=t||new v,this.looper.springSystem=this,this.listeners=[],this._activeSprings=[],this._idleSpringIndices=[],this._isIdle=!0,this._lastTimeMillis=-1,this._springRegistry={}};E.prototype.createSpring=function(t,e){return this.createSpringWithConfig({tension:t,friction:e})},E.prototype.createSpringWithConfig=function(t){var e=new S(this);return this.registerSpring(e),e.setSpringConfig(t),e},E.prototype.getIsIdle=function(){return this._isIdle},E.prototype.registerSpring=function(t){this._springRegistry[t.getId()]=t},E.prototype.deregisterSpring=function(t){m(this._activeSprings,t),delete this._springRegistry[t.getId()]},E.prototype.advance=function(t,e){for(var n=this;this._idleSpringIndices.length>0;)this._idleSpringIndices.pop();for(this._activeSprings.filter(Boolean).forEach(function(i){i.systemShouldAdvance()?i.advance(t/1e3,e/1e3):n._idleSpringIndices.push(n._activeSprings.indexOf(i))});this._idleSpringIndices.length>0;){var i=this._idleSpringIndices.pop();i>=0&&this._activeSprings.splice(i,1)}},E.prototype.loop=function(t){var e;-1===this._lastTimeMillis&&(this._lastTimeMillis=t-1);var n=t-this._lastTimeMillis;this._lastTimeMillis=t;var i=0,r=this.listeners.length;for(i=0;i<r;i++)(e=this.listeners[i]).onBeforeIntegrate&&e.onBeforeIntegrate(this);for(this.advance(t,n),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),i=0;i<r;i++)(e=this.listeners[i]).onAfterIntegrate&&e.onAfterIntegrate(this);this._isIdle||this.looper.run()},E.prototype.activateSpring=function(t){var e=this._springRegistry[t];-1===this._activeSprings.indexOf(e)&&this._activeSprings.push(e),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())};var _=new E,C=function(t){var e=t.springConfig,n=e.overshootClamping,i=t.onSpringActivate,r=t.getOnUpdateFunc,o=t.onAnimationEnd;if(t.noOp)return null;var a=_.createSpring(e.stiffness,e.damping);return a.setOvershootClampingEnabled(!!n),a.addListener({onSpringActivate:i,onSpringUpdate:r(a.destroy.bind(a)),onSpringAtRest:function(){a.destroy(),o()}}),a},I=function(t){t&&t.forEach(function(t){!function(t){var e=C(t);e?e.setEndValue(1):t.onSpringActivate()}(t),I(t.immediateChildren)})},O=function(t){return[0,1,4,5,12,13].map(function(e){return t[e]})},b=function(t){return t.top<window.innerHeight&&t.bottom>0&&t.left<window.innerWidth&&t.right>0},A=function(t,e,n){return t+(e-t)*n},T=function(t,e){var n;return l(t,((n={})[e[0]]=e[1],n))},x=function(t,e){return s(e?document.querySelectorAll('[data-portal-key="'+e+'"]'):t.querySelectorAll("[data-flip-id]"))},w=i.createContext({}),P=i.createContext("portal"),V=function(t){function n(){t.apply(this,arguments),this.inProgressAnimations={},this.flipCallbacks={},this.el=void 0}return t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n,n.prototype.getSnapshotBeforeUpdate=function(t){return t.flipKey!==this.props.flipKey&&this.el?function(t){var e=t.element,n=t.flipCallbacks;void 0===n&&(n={});var i=t.inProgressAnimations;void 0===i&&(i={});var r=x(e,t.portalKey),o=s(e.querySelectorAll("[data-inverse-flip-id]")),a={},p=[],c={};r.filter(function(t){return n&&n[t.dataset.flipId]&&n[t.dataset.flipId].onExit}).forEach(function(t){var e=t.parentNode;if(t.closest){var n=t.closest("[data-exit-container]");n&&(e=n)}var i=p.findIndex(function(t){return t[0]===e});-1===i&&(p.push([e,e.getBoundingClientRect()]),i=p.length-1),a[t.dataset.flipId]=p[i][1],c[t.dataset.flipId]=e});var u=r.map(function(t){var e={},i=t.getBoundingClientRect();if(n&&n[t.dataset.flipId]&&n[t.dataset.flipId].onExit){var r=a[t.dataset.flipId];l(e,{element:t,parent:c[t.dataset.flipId],childPosition:{top:i.top-r.top,left:i.left-r.left,width:i.width,height:i.height}})}return[t.dataset.flipId,{rect:i,opacity:parseFloat(window.getComputedStyle(t).opacity||"1"),domDataForExitAnimations:e}]}).reduce(T,{});return function(t){Object.keys(t).forEach(function(e){t[e].stop&&t[e].stop(),delete t[e]})}(i),r.concat(o).forEach(function(t){t.style.transform="",t.style.opacity=""}),{flippedElementPositions:u,cachedOrderedFlipIds:r.map(function(t){return t.dataset.flipId})}}({element:this.el,flipCallbacks:this.flipCallbacks,inProgressAnimations:this.inProgressAnimations,portalKey:this.props.portalKey}):null},n.prototype.componentDidUpdate=function(t,n,i){this.props.flipKey!==t.flipKey&&this.el&&function(t){var n=t.cachedOrderedFlipIds;void 0===n&&(n=[]);var i=t.inProgressAnimations;void 0===i&&(i={});var r=t.flippedElementPositionsBeforeUpdate;void 0===r&&(r={});var p=t.flipCallbacks;void 0===p&&(p={});var d=t.containerEl,h=t.applyTransformOrigin,g=t.spring,m=t.debug,v=t.portalKey,y=t.staggerConfig;void 0===y&&(y={});var S=t.decisionData;void 0===S&&(S={});var E=t.handleEnterUpdateDelete,_=t.retainTransform,w=t.onComplete,P=function(t){return x(t.element,t.portalKey).map(function(t){var e=window.getComputedStyle(t),n=t.getBoundingClientRect();return[t.dataset.flipId,{rect:n,opacity:parseFloat(e.opacity),transform:e.transform}]}).reduce(T,{})}({element:d,portalKey:v}),V=function(t){var e=t.containerEl,n=t.portalKey;return n?function(t){return function(e){return s(document.querySelectorAll('[data-portal-key="'+t+'"]'+e))}}(n):e?function(t){var e=Math.random().toFixed(5);return t.dataset.flipperId=e,function(n){return s(t.querySelectorAll('[data-flipper-id="'+e+'"] '+n))}}(e):function(){return[]}}({containerEl:d,portalKey:v}),M=function(t){return function(e){return t('[data-flip-id="'+e+'"]')[0]}}(V),R=function(t){return r[t]&&P[t]},D=Object.keys(r).concat(Object.keys(P)).filter(function(t){return!R(t)}),F={flipCallbacks:p,getElement:M,flippedElementPositionsBeforeUpdate:r,flippedElementPositionsAfterUpdate:P,inProgressAnimations:i},U=function(t){var e=t.unflippedIds,n=t.flipCallbacks,i=t.getElement,r=t.flippedElementPositionsBeforeUpdate,o=t.flippedElementPositionsAfterUpdate,a=t.inProgressAnimations,s=e.filter(function(t){return o[t]}),l=s.filter(function(t){return n[t]&&n[t].onAppear}),p=e.filter(function(t){return r[t]&&n[t]&&n[t].onExit});s.forEach(function(t){var e=i(t);e&&(e.dataset.isAppearing="true")});var c,u=new Promise(function(t){c=t}),f=[],d=0,h=p.map(function(t,e){var i=r[t].domDataForExitAnimations,o=i.element,s=i.parent,l=i.childPosition,p=l.top,u=l.left,h=l.width,g=l.height;"static"===getComputedStyle(s).position&&(s.style.position="relative"),o.style.transform="matrix(1, 0, 0, 1, 0, 0)",o.style.position="absolute",o.style.top=p+"px",o.style.left=u+"px",o.style.height=g+"px",o.style.width=h+"px";var m=f.filter(function(t){return t[0]===s})[0];m||(m=[s,document.createDocumentFragment()],f.push(m)),m[1].appendChild(o),d+=1;var v=function(){try{s.removeChild(o)}catch(t){}finally{0==(d-=1)&&c()}};return a[t]={stop:v},function(){return n[t].onExit(o,e,v)}});return f.forEach(function(t){t[0].appendChild(t[1])}),h.length||c(),{hideEnteringElements:function(){l.forEach(function(t){var e=i(t);e&&(e.style.opacity="0")})},animateEnteringElements:function(){l.forEach(function(t,e){var r=i(t);r&&n[t].onAppear(r,e)})},animateExitingElements:function(){return h.forEach(function(t){return t()}),u}}}(l({},F,{unflippedIds:D})),k=U.hideEnteringElements,L=U.animateEnteringElements,j=U.animateExitingElements,K=function(t){var n=t.flippedIds,i=t.flipCallbacks,r=t.inProgressAnimations,p=t.flippedElementPositionsBeforeUpdate,d=t.flippedElementPositionsAfterUpdate,h=t.applyTransformOrigin,g=t.spring,m=t.getElement,v=t.debug,y=t.staggerConfig,S=t.decisionData;void 0===S&&(S={});var E,_,T=t.scopedSelector,x=t.retainTransform,w=t.onComplete,P=new Promise(function(t){E=t});if(w&&P.then(w),!n.length)return function(){return E([]),P};var V=[],M=m(n[0]),R=M?M.ownerDocument.querySelector("body"):document.querySelector("body");v&&console.error('[react-flip-toolkit]\nThe "debug" prop is set to true. All FLIP animations will return at the beginning of the transition.');var D,F=(D=n.reduce(function(t,e){return t[e]=(t[e]||0)+1,t},{}),Object.keys(D).filter(function(t){return D[t]>1}));F.length&&console.error("[react-flip-toolkit]\nThere are currently multiple elements with the same flipId on the page.\nThe animation will only work if each Flipped component has a unique flipId.\nDuplicate flipId"+(F.length>1?"s":"")+": "+F.join("\n"));var U=n.map(function(t){var n=p[t].rect,u=d[t].rect,f=p[t].opacity,v=d[t].opacity,y=u.width<1||u.height<1;if(!b(n)&&!b(u))return!1;if(0===n.width&&0===u.width||0===n.height&&0===u.height)return!1;var C=m(t);if(!C)return!1;var I=JSON.parse(C.dataset.flipConfig),T=function(t){void 0===t&&(t={});var e=t.flippedSpring,n=function(t){return a(t)?t:Object.keys(c).indexOf(t)>-1?c[t]:{}};return l({},c.noWobble,n(t.flipperSpring),n(e))}({flipperSpring:g,flippedSpring:I.spring}),w=!0===I.stagger?"default":I.stagger,P={element:C,id:t,stagger:w,springConfig:T,noOp:!0};if(i[t]&&i[t].shouldFlip&&!i[t].shouldFlip(S.prev,S.current))return P;var M=Math.abs(n.left-u.left)+Math.abs(n.top-u.top),D=Math.abs(n.width-u.width)+Math.abs(n.height-u.height),F=Math.abs(v-f);if(M<.5&&D<.5&&F<.01)return P;P.noOp=!1;var U=e.parse(d[t].transform),k={matrix:U},L={matrix:[]},j=[U];I.translate&&(j.push(e.translateX(n.left-u.left)),j.push(e.translateY(n.top-u.top))),I.scale&&(j.push(e.scaleX(Math.max(n.width,1)/Math.max(u.width,1))),j.push(e.scaleY(Math.max(n.height,1)/Math.max(u.height,1)))),I.opacity&&(L.opacity=f,k.opacity=v);var K=[];if(!i[t]||!i[t].shouldInvert||i[t].shouldInvert(S.prev,S.current)){var q=function(t,e){return s(t.querySelectorAll('[data-inverse-flip-id="'+e+'"]'))}(C,t);K=q.map(function(t){return[t,JSON.parse(t.dataset.flipConfig)]})}L.matrix=O(j.reduce(e.multiply)),k.matrix=O(k.matrix);var B,X=function(t){var e=t.element,n=t.invertedChildren,i=t.body,r=t.retainTransform;return function(t){var a=t.matrix,s=t.opacity,l=t.forceMinVals;if(o(s)&&(e.style.opacity=s+""),l&&(e.style.minHeight="1px",e.style.minWidth="1px"),a){var p=function(t){return"matrix("+t.join(", ")+")"}(a);r&&"matrix(1, 0, 0, 1, 0, 0)"===p&&(p="matrix(1, 0.00001, -0.00001, 1, 0, 0)"),e.style.transform=p,n&&function(t){var e=t.matrix,n=t.body;t.invertedChildren.forEach(function(t){var i=t[0],r=t[1];if(n.contains(i)){var o=e[0],a=e[3],s=e[5],l={translateX:0,translateY:0,scaleX:1,scaleY:1},p="";r.translate&&(l.translateX=-e[4]/o,l.translateY=-s/a,p+="translate("+l.translateX+"px, "+l.translateY+"px)"),r.scale&&(l.scaleX=1/o,l.scaleY=1/a,p+=" scale("+l.scaleX+", "+l.scaleY+")"),i.style.transform=p}})}({invertedChildren:n,matrix:a,body:i})}}}({element:C,invertedChildren:K,body:R,retainTransform:x});if(i[t]&&i[t].onComplete){var Y=i[t].onComplete;B=function(){return Y(C,S.prev,S.current)}}var N=o(L.opacity)&&o(k.opacity)&&L.opacity!==k.opacity,W=!1;return l({},P,{stagger:w,springConfig:T,getOnUpdateFunc:function(e){return r[t]={stop:e,onComplete:B},function(n){i[t]&&i[t].onSpringUpdate&&i[t].onSpringUpdate(n.getCurrentValue()),W||(W=!0,i[t]&&i[t].onStart&&i[t].onStart(C,S.prev,S.current));var r=n.getCurrentValue();if(R.contains(C)){var o={matrix:[]};o.matrix=L.matrix.map(function(t,e){return A(t,k.matrix[e],r)}),N&&(o.opacity=A(L.opacity,k.opacity,r)),X(o)}else e()}},initializeFlip:function(){X({matrix:L.matrix,opacity:N?L.opacity:void 0,forceMinVals:y}),i[t]&&i[t].onStartImmediate&&i[t].onStartImmediate(C,S.prev,S.current),I.transformOrigin?C.style.transformOrigin=I.transformOrigin:h&&(C.style.transformOrigin="0 0"),K.forEach(function(t){var e=t[0],n=t[1];n.transformOrigin?e.style.transformOrigin=n.transformOrigin:h&&(e.style.transformOrigin="0 0")})},onAnimationEnd:function(){delete r[t],"function"==typeof B&&B(),C.style.transform="",y&&C&&(C.style.minHeight="",C.style.minWidth=""),V.push(t),V.length>=_.length&&E(V)}})}).filter(function(t){return t});if((_=U.filter(function(t){return Boolean(t.initializeFlip)})).forEach(function(t){return(0,t.initializeFlip)()}),v)return function(){};var k=U.reduce(function(t,e){return t[e.id]=e,t},{}),L=function(t){var e=t.flipDataDict,n=t.flippedIds,i=t.scopedSelector,r={},o=function(t,a,s){var l=t+" "+f,p=u(i,l,n),c=s.filter(function(t){return-1===p.indexOf(t)});r[a]=c,c.forEach(function(t){e[t]&&(e[t].level=a)}),0!==p.length&&o(l,a+1,p)};return o(f,0,u(i,f,n)),Object.keys(e).forEach(function(t){var i=e[t];i.childIds=u(function(t){return s(i.element.querySelectorAll(t))},f,n),i.childIds=i.childIds.filter(function(t){return r[i.level+1]&&r[i.level+1].indexOf(t)>-1})}),r[0]}({flipDataDict:k,flippedIds:n,scopedSelector:T});return function(){return _.length||E([]),function(t){var e=t.staggerConfig,n=function(t){t&&Object.keys(t).length&&Object.keys(t).forEach(function(n){return function(t,e){if(void 0===e&&(e={}),t&&t.length){e.reverse&&t.reverse();var n,i="number"!=typeof(n=e.speed)?1.1:1+Math.min(Math.max(5*n,0),5),r=1/Math.max(Math.min(t.length,100),10),o=t.filter(function(t){return!t.noOp}).map(function(t,e){var n=t.getOnUpdateFunc;return t.getOnUpdateFunc=function(t){var a=n(t);return function(t){var n=t.getCurrentValue();n>r&&o[e+1]&&o[e+1].setEndValue(Math.min(n*i,1)),a(t)}},t}).map(function(t){return C(t)});o[0]&&o[0].setEndValue(1)}}(t[n],e[n])})},i=function(t){var e=t.flipDataDict,n=t.initiateStaggeredAnimations,i={root:{staggeredChildren:{},immediateChildren:[]}},r=function(t,i){var o=e[i];o&&(o.stagger?t.staggeredChildren[o.stagger]?t.staggeredChildren[o.stagger].push(o):t.staggeredChildren[o.stagger]=[o]:t.immediateChildren.push(o),o.onSpringActivate=function(){I(o.immediateChildren),n(o.staggeredChildren)},o.staggeredChildren={},o.immediateChildren=[],o.childIds.forEach(function(t){return r(o,t)}))};return t.topLevelChildren.forEach(function(t){r(i.root,t)}),i}({flipDataDict:t.flipDataDict,topLevelChildren:t.topLevelChildren,initiateStaggeredAnimations:n});I(i.root.immediateChildren),n(i.root.staggeredChildren)}({topLevelChildren:L,flipDataDict:k,staggerConfig:y}),P}}(l({},F,{flippedIds:n.filter(R),applyTransformOrigin:h,spring:g,debug:m,staggerConfig:y,decisionData:S,scopedSelector:V,retainTransform:_,onComplete:w}));D.filter(function(t){return P[t]}).forEach(function(t){var e=M(t);e&&e.removeAttribute("data-is-appearing")}),E?E({hideEnteringElements:k,animateEnteringElements:L,animateExitingElements:j,animateFlippedElements:K}):(k(),j().then(L),K())}({flippedElementPositionsBeforeUpdate:i.flippedElementPositions,cachedOrderedFlipIds:i.cachedOrderedFlipIds,containerEl:this.el,inProgressAnimations:this.inProgressAnimations,flipCallbacks:this.flipCallbacks,applyTransformOrigin:this.props.applyTransformOrigin,spring:this.props.spring,debug:this.props.debug,portalKey:this.props.portalKey,staggerConfig:this.props.staggerConfig,handleEnterUpdateDelete:this.props.handleEnterUpdateDelete,retainTransform:this.props.retainTransform,decisionData:{prev:t.decisionData,current:this.props.decisionData},onComplete:this.props.onComplete})},n.prototype.render=function(){var t=this,e=this.props,n=e.portalKey,i=r.createElement(w.Provider,{value:this.flipCallbacks},r.createElement(e.element,{className:e.className,ref:function(e){return t.el=e}},this.props.children));return n?r.createElement(P.Provider,{value:n},i):i},n}(i.Component);function M(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&-1===e.indexOf(i)&&(n[i]=t[i]);return n}V.defaultProps={applyTransformOrigin:!0,element:"div",retainTransform:!1},V.propTypes={flipKey:n.any,children:n.node.isRequired,spring:n.oneOfType([n.string,n.object]),applyTransformOrigin:n.bool,debug:n.bool,element:n.string,className:n.string,portalKey:n.string,staggerConfig:n.object,decisionData:n.any,handleEnterUpdateDelete:n.func,retainTransform:n.bool,onComplete:n.func};var R={children:n.oneOfType([n.node,n.func]).isRequired,inverseFlipId:n.string,flipId:n.string,opacity:n.bool,translate:n.bool,scale:n.bool,transformOrigin:n.string,spring:n.oneOfType([n.string,n.object]),onStart:n.func,onComplete:n.func,onAppear:n.func,onSpringUpdate:n.func,shouldFlip:n.func,shouldInvert:n.func,onExit:n.func,portalKey:n.string,stagger:n.oneOfType([n.string,n.bool])},D=function(t){var e=t.children,n=t.flipId,r=t.inverseFlipId,o=t.portalKey,a=M(t,["children","flipId","inverseFlipId","portalKey"]),s=e,p=function(t){return"function"==typeof t}(s);if(!p)try{s=i.Children.only(e)}catch(t){throw new Error("Each Flipped component must wrap a single child")}a.scale||a.translate||a.opacity||l(a,{translate:!0,scale:!0,opacity:!0});var c={};return c["data-flip-id"]=n,c["data-inverse-flip-id"]=r,c["data-flip-config"]=JSON.stringify(a),o&&(c["data-portal-key"]=o),p?s(c):i.cloneElement(s,c)},F=function(t){var e=t.children,n=t.flipId,i=t.shouldFlip,o=t.shouldInvert,s=t.onAppear,l=t.onStart,p=t.onStartImmediate,c=t.onComplete,u=t.onExit,f=t.onSpringUpdate,d=M(t,["children","flipId","shouldFlip","shouldInvert","onAppear","onStart","onStartImmediate","onComplete","onExit","onSpringUpdate"]);return e?d.inverseFlipId?r.createElement(D,Object.assign({},d),e):r.createElement(P.Consumer,null,function(t){return r.createElement(w.Consumer,null,function(h){return a(h)&&(h[n]={shouldFlip:i,shouldInvert:o,onAppear:s,onStart:l,onStartImmediate:p,onComplete:c,onExit:u,onSpringUpdate:f}),r.createElement(D,Object.assign({flipId:n},d,{portalKey:t}),e)})}):null};F.propTypes=R,t.Flipper=V,t.Flipped=F,t.ExitContainer=function(t){var e;return i.cloneElement(t.children,((e={})["data-exit-container"]=!0,e))}});
//# sourceMappingURL=index.umd.js.map
