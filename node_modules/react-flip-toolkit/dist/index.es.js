import{parse as t,translateX as e,translateY as i,scaleX as n,scaleY as r,multiply as o}from"rematrix";import a from"prop-types";import s,{Component as l,createContext as p,Children as c,cloneElement as u}from"react";var f=function(t){return"number"==typeof t},d=function(t){return"[object Object]"===Object.prototype.toString.call(t)},h=function(t){return Array.prototype.slice.apply(t)};function g(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return e.forEach(function(e){if(e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}),t}var m,v={noWobble:{stiffness:200,damping:26},gentle:{stiffness:120,damping:14},veryGentle:{stiffness:130,damping:17},wobbly:{stiffness:180,damping:12},stiff:{stiffness:260,damping:26}},y=function(t,e,i){var n=t(e).map(function(t){return t.dataset.flipId});return i.filter(function(t){return n.indexOf(t)>-1})},S="[data-flip-id]:not([data-is-appearing])";"undefined"!=typeof window&&(m=window.requestAnimationFrame);var E=m=m||function(t){window.setTimeout(t,1e3/60)},_=Date.now(),C="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()-_};function I(t,e){var i=t.indexOf(e);-1!==i&&t.splice(i,1)}var O=function(){};O.prototype.run=function(){var t=this;E(function(){t.springSystem.loop(C())})};var b=function(){this.position=0,this.velocity=0},A=function t(e){this._id="s"+t._ID++,this._springSystem=e,this.listeners=[],this._startValue=0,this._currentState=new b,this._displacementFromRestThreshold=.001,this._endValue=0,this._overshootClampingEnabled=!1,this._previousState=new b,this._restSpeedThreshold=.001,this._tempState=new b,this._timeAccumulator=0,this._wasAtRest=!0};A.prototype.getId=function(){return this._id},A.prototype.destroy=function(){this.listeners=[],this._springSystem.deregisterSpring(this)},A.prototype.setSpringConfig=function(t){return this._springConfig=t,this},A.prototype.getCurrentValue=function(){return this._currentState.position},A.prototype.getDisplacementDistanceForState=function(t){return Math.abs(this._endValue-t.position)},A.prototype.setEndValue=function(t){if(this._endValue===t&&this.isAtRest())return this;this._startValue=this.getCurrentValue(),this._endValue=t,this._springSystem.activateSpring(this.getId());for(var e=0,i=this.listeners.length;e<i;e++){var n=this.listeners[e].onSpringEndStateChange;n&&n(this)}return this},A.prototype.setVelocity=function(t){return t===this._currentState.velocity?this:(this._currentState.velocity=t,this._springSystem.activateSpring(this.getId()),this)},A.prototype.setOvershootClampingEnabled=function(t){return this._overshootClampingEnabled=t,this},A.prototype.isOvershooting=function(){var t=this._startValue,e=this._endValue;return this._springConfig.tension>0&&(t<e&&this.getCurrentValue()>e||t>e&&this.getCurrentValue()<e)},A.prototype.advance=function(t,e){var i=this.isAtRest();if(!i||!this._wasAtRest){var n=e;e>A.MAX_DELTA_TIME_SEC&&(n=A.MAX_DELTA_TIME_SEC),this._timeAccumulator+=n;for(var r,o,a,s,l,p,c=this._springConfig.tension,u=this._springConfig.friction,f=this._currentState.position,d=this._currentState.velocity,h=this._tempState.position,g=this._tempState.velocity;this._timeAccumulator>=A.SOLVER_TIMESTEP_SEC;)this._timeAccumulator-=A.SOLVER_TIMESTEP_SEC,this._timeAccumulator<A.SOLVER_TIMESTEP_SEC&&(this._previousState.position=f,this._previousState.velocity=d),o=c*(this._endValue-h)-u*d,s=c*(this._endValue-(h=f+(r=d)*A.SOLVER_TIMESTEP_SEC*.5))-u*(g=d+o*A.SOLVER_TIMESTEP_SEC*.5),p=c*(this._endValue-(h=f+(a=g)*A.SOLVER_TIMESTEP_SEC*.5))-u*(g=d+s*A.SOLVER_TIMESTEP_SEC*.5),h=f+(l=g)*A.SOLVER_TIMESTEP_SEC,f+=1/6*(r+2*(a+l)+(g=d+p*A.SOLVER_TIMESTEP_SEC))*A.SOLVER_TIMESTEP_SEC,d+=1/6*(o+2*(s+p)+(c*(this._endValue-h)-u*g))*A.SOLVER_TIMESTEP_SEC;this._tempState.position=h,this._tempState.velocity=g,this._currentState.position=f,this._currentState.velocity=d,this._timeAccumulator>0&&this._interpolate(this._timeAccumulator/A.SOLVER_TIMESTEP_SEC),(this.isAtRest()||this._overshootClampingEnabled&&this.isOvershooting())&&(this._springConfig.tension>0?(this._startValue=this._endValue,this._currentState.position=this._endValue):(this._endValue=this._currentState.position,this._startValue=this._endValue),this.setVelocity(0),i=!0);var m=!1;this._wasAtRest&&(this._wasAtRest=!1,m=!0);var v=!1;i&&(this._wasAtRest=!0,v=!0),this.notifyPositionUpdated(m,v)}},A.prototype.notifyPositionUpdated=function(t,e){for(var i=0,n=this.listeners.length;i<n;i++){var r=this.listeners[i];t&&r.onSpringActivate&&r.onSpringActivate(this),r.onSpringUpdate&&r.onSpringUpdate(this),e&&r.onSpringAtRest&&r.onSpringAtRest(this)}},A.prototype.systemShouldAdvance=function(){return!this.isAtRest()||!this.wasAtRest()},A.prototype.wasAtRest=function(){return this._wasAtRest},A.prototype.isAtRest=function(){return Math.abs(this._currentState.velocity)<this._restSpeedThreshold&&(this.getDisplacementDistanceForState(this._currentState)<=this._displacementFromRestThreshold||0===this._springConfig.tension)},A.prototype._interpolate=function(t){this._currentState.position=this._currentState.position*t+this._previousState.position*(1-t),this._currentState.velocity=this._currentState.velocity*t+this._previousState.velocity*(1-t)},A.prototype.addListener=function(t){return this.listeners.push(t),this},A.prototype.removeListener=function(t){return I(this.listeners,t),this},A._ID=0,A.MAX_DELTA_TIME_SEC=.064,A.SOLVER_TIMESTEP_SEC=.001;var T=function(t){this.looper=t||new O,this.looper.springSystem=this,this.listeners=[],this._activeSprings=[],this._idleSpringIndices=[],this._isIdle=!0,this._lastTimeMillis=-1,this._springRegistry={}};T.prototype.createSpring=function(t,e){return this.createSpringWithConfig({tension:t,friction:e})},T.prototype.createSpringWithConfig=function(t){var e=new A(this);return this.registerSpring(e),e.setSpringConfig(t),e},T.prototype.getIsIdle=function(){return this._isIdle},T.prototype.registerSpring=function(t){this._springRegistry[t.getId()]=t},T.prototype.deregisterSpring=function(t){I(this._activeSprings,t),delete this._springRegistry[t.getId()]},T.prototype.advance=function(t,e){for(var i=this;this._idleSpringIndices.length>0;)this._idleSpringIndices.pop();for(this._activeSprings.filter(Boolean).forEach(function(n){n.systemShouldAdvance()?n.advance(t/1e3,e/1e3):i._idleSpringIndices.push(i._activeSprings.indexOf(n))});this._idleSpringIndices.length>0;){var n=this._idleSpringIndices.pop();n>=0&&this._activeSprings.splice(n,1)}},T.prototype.loop=function(t){var e;-1===this._lastTimeMillis&&(this._lastTimeMillis=t-1);var i=t-this._lastTimeMillis;this._lastTimeMillis=t;var n=0,r=this.listeners.length;for(n=0;n<r;n++)(e=this.listeners[n]).onBeforeIntegrate&&e.onBeforeIntegrate(this);for(this.advance(t,i),0===this._activeSprings.length&&(this._isIdle=!0,this._lastTimeMillis=-1),n=0;n<r;n++)(e=this.listeners[n]).onAfterIntegrate&&e.onAfterIntegrate(this);this._isIdle||this.looper.run()},T.prototype.activateSpring=function(t){var e=this._springRegistry[t];-1===this._activeSprings.indexOf(e)&&this._activeSprings.push(e),this.getIsIdle()&&(this._isIdle=!1,this.looper.run())};var x=new T,w=function(t){var e=t.springConfig,i=e.overshootClamping,n=t.onSpringActivate,r=t.getOnUpdateFunc,o=t.onAnimationEnd;if(t.noOp)return null;var a=x.createSpring(e.stiffness,e.damping);return a.setOvershootClampingEnabled(!!i),a.addListener({onSpringActivate:n,onSpringUpdate:r(a.destroy.bind(a)),onSpringAtRest:function(){a.destroy(),o()}}),a},V=function(t){t&&t.forEach(function(t){!function(t){var e=w(t);e?e.setEndValue(1):t.onSpringActivate()}(t),V(t.immediateChildren)})},P=function(t){return[0,1,4,5,12,13].map(function(e){return t[e]})},M=function(t){return t.top<window.innerHeight&&t.bottom>0&&t.left<window.innerWidth&&t.right>0},D=function(t,e,i){return t+(e-t)*i},R=function(t,e){var i;return g(t,((i={})[e[0]]=e[1],i))},F=function(t,e){return h(e?document.querySelectorAll('[data-portal-key="'+e+'"]'):t.querySelectorAll("[data-flip-id]"))},U=p({}),k=p("portal"),L=function(a){function l(){a.apply(this,arguments),this.inProgressAnimations={},this.flipCallbacks={},this.el=void 0}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.getSnapshotBeforeUpdate=function(t){return t.flipKey!==this.props.flipKey&&this.el?function(t){var e=t.element,i=t.flipCallbacks;void 0===i&&(i={});var n=t.inProgressAnimations;void 0===n&&(n={});var r=F(e,t.portalKey),o=h(e.querySelectorAll("[data-inverse-flip-id]")),a={},s=[],l={};r.filter(function(t){return i&&i[t.dataset.flipId]&&i[t.dataset.flipId].onExit}).forEach(function(t){var e=t.parentNode;if(t.closest){var i=t.closest("[data-exit-container]");i&&(e=i)}var n=s.findIndex(function(t){return t[0]===e});-1===n&&(s.push([e,e.getBoundingClientRect()]),n=s.length-1),a[t.dataset.flipId]=s[n][1],l[t.dataset.flipId]=e});var p=r.map(function(t){var e={},n=t.getBoundingClientRect();if(i&&i[t.dataset.flipId]&&i[t.dataset.flipId].onExit){var r=a[t.dataset.flipId];g(e,{element:t,parent:l[t.dataset.flipId],childPosition:{top:n.top-r.top,left:n.left-r.left,width:n.width,height:n.height}})}return[t.dataset.flipId,{rect:n,opacity:parseFloat(window.getComputedStyle(t).opacity||"1"),domDataForExitAnimations:e}]}).reduce(R,{});return function(t){Object.keys(t).forEach(function(e){t[e].stop&&t[e].stop(),delete t[e]})}(n),r.concat(o).forEach(function(t){t.style.transform="",t.style.opacity=""}),{flippedElementPositions:p,cachedOrderedFlipIds:r.map(function(t){return t.dataset.flipId})}}({element:this.el,flipCallbacks:this.flipCallbacks,inProgressAnimations:this.inProgressAnimations,portalKey:this.props.portalKey}):null},l.prototype.componentDidUpdate=function(a,s,l){this.props.flipKey!==a.flipKey&&this.el&&function(a){var s=a.cachedOrderedFlipIds;void 0===s&&(s=[]);var l=a.inProgressAnimations;void 0===l&&(l={});var p=a.flippedElementPositionsBeforeUpdate;void 0===p&&(p={});var c=a.flipCallbacks;void 0===c&&(c={});var u=a.containerEl,m=a.applyTransformOrigin,E=a.spring,_=a.debug,C=a.portalKey,I=a.staggerConfig;void 0===I&&(I={});var O=a.decisionData;void 0===O&&(O={});var b=a.handleEnterUpdateDelete,A=a.retainTransform,T=a.onComplete,x=function(t){return F(t.element,t.portalKey).map(function(t){var e=window.getComputedStyle(t),i=t.getBoundingClientRect();return[t.dataset.flipId,{rect:i,opacity:parseFloat(e.opacity),transform:e.transform}]}).reduce(R,{})}({element:u,portalKey:C}),U=function(t){var e=t.containerEl,i=t.portalKey;return i?function(t){return function(e){return h(document.querySelectorAll('[data-portal-key="'+t+'"]'+e))}}(i):e?function(t){var e=Math.random().toFixed(5);return t.dataset.flipperId=e,function(i){return h(t.querySelectorAll('[data-flipper-id="'+e+'"] '+i))}}(e):function(){return[]}}({containerEl:u,portalKey:C}),k=function(t){return function(e){return t('[data-flip-id="'+e+'"]')[0]}}(U),L=function(t){return p[t]&&x[t]},j=Object.keys(p).concat(Object.keys(x)).filter(function(t){return!L(t)}),K={flipCallbacks:c,getElement:k,flippedElementPositionsBeforeUpdate:p,flippedElementPositionsAfterUpdate:x,inProgressAnimations:l},q=function(t){var e=t.unflippedIds,i=t.flipCallbacks,n=t.getElement,r=t.flippedElementPositionsBeforeUpdate,o=t.flippedElementPositionsAfterUpdate,a=t.inProgressAnimations,s=e.filter(function(t){return o[t]}),l=s.filter(function(t){return i[t]&&i[t].onAppear}),p=e.filter(function(t){return r[t]&&i[t]&&i[t].onExit});s.forEach(function(t){var e=n(t);e&&(e.dataset.isAppearing="true")});var c,u=new Promise(function(t){c=t}),f=[],d=0,h=p.map(function(t,e){var n=r[t].domDataForExitAnimations,o=n.element,s=n.parent,l=n.childPosition,p=l.top,u=l.left,h=l.width,g=l.height;"static"===getComputedStyle(s).position&&(s.style.position="relative"),o.style.transform="matrix(1, 0, 0, 1, 0, 0)",o.style.position="absolute",o.style.top=p+"px",o.style.left=u+"px",o.style.height=g+"px",o.style.width=h+"px";var m=f.filter(function(t){return t[0]===s})[0];m||(m=[s,document.createDocumentFragment()],f.push(m)),m[1].appendChild(o),d+=1;var v=function(){try{s.removeChild(o)}catch(t){}finally{0==(d-=1)&&c()}};return a[t]={stop:v},function(){return i[t].onExit(o,e,v)}});return f.forEach(function(t){t[0].appendChild(t[1])}),h.length||c(),{hideEnteringElements:function(){l.forEach(function(t){var e=n(t);e&&(e.style.opacity="0")})},animateEnteringElements:function(){l.forEach(function(t,e){var r=n(t);r&&i[t].onAppear(r,e)})},animateExitingElements:function(){return h.forEach(function(t){return t()}),u}}}(g({},K,{unflippedIds:j})),B=q.hideEnteringElements,X=q.animateEnteringElements,N=q.animateExitingElements,W=function(a){var s=a.flippedIds,l=a.flipCallbacks,p=a.inProgressAnimations,c=a.flippedElementPositionsBeforeUpdate,u=a.flippedElementPositionsAfterUpdate,m=a.applyTransformOrigin,E=a.spring,_=a.getElement,C=a.debug,I=a.staggerConfig,O=a.decisionData;void 0===O&&(O={});var b,A,T=a.scopedSelector,x=a.retainTransform,R=a.onComplete,F=new Promise(function(t){b=t});if(R&&F.then(R),!s.length)return function(){return b([]),F};var U=[],k=_(s[0]),L=k?k.ownerDocument.querySelector("body"):document.querySelector("body");C&&console.error('[react-flip-toolkit]\nThe "debug" prop is set to true. All FLIP animations will return at the beginning of the transition.');var j,K=(j=s.reduce(function(t,e){return t[e]=(t[e]||0)+1,t},{}),Object.keys(j).filter(function(t){return j[t]>1}));K.length&&console.error("[react-flip-toolkit]\nThere are currently multiple elements with the same flipId on the page.\nThe animation will only work if each Flipped component has a unique flipId.\nDuplicate flipId"+(K.length>1?"s":"")+": "+K.join("\n"));var q=s.map(function(a){var s=c[a].rect,y=u[a].rect,S=c[a].opacity,C=u[a].opacity,I=y.width<1||y.height<1;if(!M(s)&&!M(y))return!1;if(0===s.width&&0===y.width||0===s.height&&0===y.height)return!1;var T=_(a);if(!T)return!1;var w=JSON.parse(T.dataset.flipConfig),V=function(t){void 0===t&&(t={});var e=t.flippedSpring,i=function(t){return d(t)?t:Object.keys(v).indexOf(t)>-1?v[t]:{}};return g({},v.noWobble,i(t.flipperSpring),i(e))}({flipperSpring:E,flippedSpring:w.spring}),R=!0===w.stagger?"default":w.stagger,F={element:T,id:a,stagger:R,springConfig:V,noOp:!0};if(l[a]&&l[a].shouldFlip&&!l[a].shouldFlip(O.prev,O.current))return F;var k=Math.abs(s.left-y.left)+Math.abs(s.top-y.top),j=Math.abs(s.width-y.width)+Math.abs(s.height-y.height),K=Math.abs(C-S);if(k<.5&&j<.5&&K<.01)return F;F.noOp=!1;var q=t(u[a].transform),B={matrix:q},X={matrix:[]},N=[q];w.translate&&(N.push(e(s.left-y.left)),N.push(i(s.top-y.top))),w.scale&&(N.push(n(Math.max(s.width,1)/Math.max(y.width,1))),N.push(r(Math.max(s.height,1)/Math.max(y.height,1)))),w.opacity&&(X.opacity=S,B.opacity=C);var W=[];if(!l[a]||!l[a].shouldInvert||l[a].shouldInvert(O.prev,O.current)){var Y=function(t,e){return h(t.querySelectorAll('[data-inverse-flip-id="'+e+'"]'))}(T,a);W=Y.map(function(t){return[t,JSON.parse(t.dataset.flipConfig)]})}X.matrix=P(N.reduce(o)),B.matrix=P(B.matrix);var z,H=function(t){var e=t.element,i=t.invertedChildren,n=t.body,r=t.retainTransform;return function(t){var o=t.matrix,a=t.opacity,s=t.forceMinVals;if(f(a)&&(e.style.opacity=a+""),s&&(e.style.minHeight="1px",e.style.minWidth="1px"),o){var l=function(t){return"matrix("+t.join(", ")+")"}(o);r&&"matrix(1, 0, 0, 1, 0, 0)"===l&&(l="matrix(1, 0.00001, -0.00001, 1, 0, 0)"),e.style.transform=l,i&&function(t){var e=t.matrix,i=t.body;t.invertedChildren.forEach(function(t){var n=t[0],r=t[1];if(i.contains(n)){var o=e[0],a=e[3],s=e[5],l={translateX:0,translateY:0,scaleX:1,scaleY:1},p="";r.translate&&(l.translateX=-e[4]/o,l.translateY=-s/a,p+="translate("+l.translateX+"px, "+l.translateY+"px)"),r.scale&&(l.scaleX=1/o,l.scaleY=1/a,p+=" scale("+l.scaleX+", "+l.scaleY+")"),n.style.transform=p}})}({invertedChildren:i,matrix:o,body:n})}}}({element:T,invertedChildren:W,body:L,retainTransform:x});if(l[a]&&l[a].onComplete){var J=l[a].onComplete;z=function(){return J(T,O.prev,O.current)}}var G=f(X.opacity)&&f(B.opacity)&&X.opacity!==B.opacity,Q=!1;return g({},F,{stagger:R,springConfig:V,getOnUpdateFunc:function(t){return p[a]={stop:t,onComplete:z},function(e){l[a]&&l[a].onSpringUpdate&&l[a].onSpringUpdate(e.getCurrentValue()),Q||(Q=!0,l[a]&&l[a].onStart&&l[a].onStart(T,O.prev,O.current));var i=e.getCurrentValue();if(L.contains(T)){var n={matrix:[]};n.matrix=X.matrix.map(function(t,e){return D(t,B.matrix[e],i)}),G&&(n.opacity=D(X.opacity,B.opacity,i)),H(n)}else t()}},initializeFlip:function(){H({matrix:X.matrix,opacity:G?X.opacity:void 0,forceMinVals:I}),l[a]&&l[a].onStartImmediate&&l[a].onStartImmediate(T,O.prev,O.current),w.transformOrigin?T.style.transformOrigin=w.transformOrigin:m&&(T.style.transformOrigin="0 0"),W.forEach(function(t){var e=t[0],i=t[1];i.transformOrigin?e.style.transformOrigin=i.transformOrigin:m&&(e.style.transformOrigin="0 0")})},onAnimationEnd:function(){delete p[a],"function"==typeof z&&z(),T.style.transform="",I&&T&&(T.style.minHeight="",T.style.minWidth=""),U.push(a),U.length>=A.length&&b(U)}})}).filter(function(t){return t});if((A=q.filter(function(t){return Boolean(t.initializeFlip)})).forEach(function(t){return(0,t.initializeFlip)()}),C)return function(){};var B=q.reduce(function(t,e){return t[e.id]=e,t},{}),X=function(t){var e=t.flipDataDict,i=t.flippedIds,n=t.scopedSelector,r={},o=function(t,a,s){var l=t+" "+S,p=y(n,l,i),c=s.filter(function(t){return-1===p.indexOf(t)});r[a]=c,c.forEach(function(t){e[t]&&(e[t].level=a)}),0!==p.length&&o(l,a+1,p)};return o(S,0,y(n,S,i)),Object.keys(e).forEach(function(t){var n=e[t];n.childIds=y(function(t){return h(n.element.querySelectorAll(t))},S,i),n.childIds=n.childIds.filter(function(t){return r[n.level+1]&&r[n.level+1].indexOf(t)>-1})}),r[0]}({flipDataDict:B,flippedIds:s,scopedSelector:T});return function(){return A.length||b([]),function(t){var e=t.staggerConfig,i=function(t){t&&Object.keys(t).length&&Object.keys(t).forEach(function(i){return function(t,e){if(void 0===e&&(e={}),t&&t.length){e.reverse&&t.reverse();var i,n="number"!=typeof(i=e.speed)?1.1:1+Math.min(Math.max(5*i,0),5),r=1/Math.max(Math.min(t.length,100),10),o=t.filter(function(t){return!t.noOp}).map(function(t,e){var i=t.getOnUpdateFunc;return t.getOnUpdateFunc=function(t){var a=i(t);return function(t){var i=t.getCurrentValue();i>r&&o[e+1]&&o[e+1].setEndValue(Math.min(i*n,1)),a(t)}},t}).map(function(t){return w(t)});o[0]&&o[0].setEndValue(1)}}(t[i],e[i])})},n=function(t){var e=t.flipDataDict,i=t.initiateStaggeredAnimations,n={root:{staggeredChildren:{},immediateChildren:[]}},r=function(t,n){var o=e[n];o&&(o.stagger?t.staggeredChildren[o.stagger]?t.staggeredChildren[o.stagger].push(o):t.staggeredChildren[o.stagger]=[o]:t.immediateChildren.push(o),o.onSpringActivate=function(){V(o.immediateChildren),i(o.staggeredChildren)},o.staggeredChildren={},o.immediateChildren=[],o.childIds.forEach(function(t){return r(o,t)}))};return t.topLevelChildren.forEach(function(t){r(n.root,t)}),n}({flipDataDict:t.flipDataDict,topLevelChildren:t.topLevelChildren,initiateStaggeredAnimations:i});V(n.root.immediateChildren),i(n.root.staggeredChildren)}({topLevelChildren:X,flipDataDict:B,staggerConfig:I}),F}}(g({},K,{flippedIds:s.filter(L),applyTransformOrigin:m,spring:E,debug:_,staggerConfig:I,decisionData:O,scopedSelector:U,retainTransform:A,onComplete:T}));j.filter(function(t){return x[t]}).forEach(function(t){var e=k(t);e&&e.removeAttribute("data-is-appearing")}),b?b({hideEnteringElements:B,animateEnteringElements:X,animateExitingElements:N,animateFlippedElements:W}):(B(),N().then(X),W())}({flippedElementPositionsBeforeUpdate:l.flippedElementPositions,cachedOrderedFlipIds:l.cachedOrderedFlipIds,containerEl:this.el,inProgressAnimations:this.inProgressAnimations,flipCallbacks:this.flipCallbacks,applyTransformOrigin:this.props.applyTransformOrigin,spring:this.props.spring,debug:this.props.debug,portalKey:this.props.portalKey,staggerConfig:this.props.staggerConfig,handleEnterUpdateDelete:this.props.handleEnterUpdateDelete,retainTransform:this.props.retainTransform,decisionData:{prev:a.decisionData,current:this.props.decisionData},onComplete:this.props.onComplete})},l.prototype.render=function(){var t=this,e=this.props,i=e.portalKey,n=s.createElement(U.Provider,{value:this.flipCallbacks},s.createElement(e.element,{className:e.className,ref:function(e){return t.el=e}},this.props.children));return i?s.createElement(k.Provider,{value:i},n):n},l}(l);function j(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&-1===e.indexOf(n)&&(i[n]=t[n]);return i}L.defaultProps={applyTransformOrigin:!0,element:"div",retainTransform:!1},L.propTypes={flipKey:a.any,children:a.node.isRequired,spring:a.oneOfType([a.string,a.object]),applyTransformOrigin:a.bool,debug:a.bool,element:a.string,className:a.string,portalKey:a.string,staggerConfig:a.object,decisionData:a.any,handleEnterUpdateDelete:a.func,retainTransform:a.bool,onComplete:a.func};var K={children:a.oneOfType([a.node,a.func]).isRequired,inverseFlipId:a.string,flipId:a.string,opacity:a.bool,translate:a.bool,scale:a.bool,transformOrigin:a.string,spring:a.oneOfType([a.string,a.object]),onStart:a.func,onComplete:a.func,onAppear:a.func,onSpringUpdate:a.func,shouldFlip:a.func,shouldInvert:a.func,onExit:a.func,portalKey:a.string,stagger:a.oneOfType([a.string,a.bool])},q=function(t){var e=t.children,i=t.flipId,n=t.inverseFlipId,r=t.portalKey,o=j(t,["children","flipId","inverseFlipId","portalKey"]),a=e,s=function(t){return"function"==typeof t}(a);if(!s)try{a=c.only(e)}catch(t){throw new Error("Each Flipped component must wrap a single child")}o.scale||o.translate||o.opacity||g(o,{translate:!0,scale:!0,opacity:!0});var l={};return l["data-flip-id"]=i,l["data-inverse-flip-id"]=n,l["data-flip-config"]=JSON.stringify(o),r&&(l["data-portal-key"]=r),s?a(l):u(a,l)},B=function(t){var e=t.children,i=t.flipId,n=t.shouldFlip,r=t.shouldInvert,o=t.onAppear,a=t.onStart,l=t.onStartImmediate,p=t.onComplete,c=t.onExit,u=t.onSpringUpdate,f=j(t,["children","flipId","shouldFlip","shouldInvert","onAppear","onStart","onStartImmediate","onComplete","onExit","onSpringUpdate"]);return e?f.inverseFlipId?s.createElement(q,Object.assign({},f),e):s.createElement(k.Consumer,null,function(t){return s.createElement(U.Consumer,null,function(h){return d(h)&&(h[i]={shouldFlip:n,shouldInvert:r,onAppear:o,onStart:a,onStartImmediate:l,onComplete:p,onExit:c,onSpringUpdate:u}),s.createElement(q,Object.assign({flipId:i},f,{portalKey:t}),e)})}):null};B.propTypes=K;var X=function(t){var e;return u(t.children,((e={})["data-exit-container"]=!0,e))};export{L as Flipper,B as Flipped,X as ExitContainer};
//# sourceMappingURL=index.es.js.map
